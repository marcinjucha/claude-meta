# Refactor iOS + TCA Architecture

Analyze code for refactoring opportunities in iOS/TCA context:

**TCA Refactoring:**
- Adopt ViewAction/ResponseAction/DelegateAction pattern
- Extract child features (feature composition)
- Simplify complex reducers (split into multiple cases)
- Improve effect patterns (publishers vs TaskGroups)
- Add proper dependency injection (@Dependency, makeWithDeps)
- Implement proper navigation (@Presents, NavigationStack)

**Architecture Refactoring:**
- Extract Use Cases from bloated Stores
- Create Services to prevent Repository cycles
- Move business logic from Presentation to Business layer
- Split massive Use Cases/Services
- Improve layer separation (fix layer skipping)

**Code Quality Refactoring:**
- Eliminate code duplication (extract helpers, extensions)
- Break down complex functions (single responsibility)
- Extract magic numbers/strings (constants, enums)
- Improve naming (descriptive, intention-revealing)
- Add error handling (Result types, proper throws)

**SwiftUI Refactoring:**
- Extract view components (reusable views)
- Apply design system (Colors, L10n, .defaultFont())
- Add accessibility support
- Improve layout structure

Provides specific refactoring steps with before/after examples following project patterns.

**Agent Used:** May invoke `tca-developer`, `ios-architect`, or `ios-swiftui-designer`.

## Usage
```
/refactor [file_path] [refactor_goal]
```

## Parameters
- `file_path`: Path to the file to refactor (required)
- `refactor_goal`: Optional specific objective (e.g., "extract use case", "split reducer", "improve actions")