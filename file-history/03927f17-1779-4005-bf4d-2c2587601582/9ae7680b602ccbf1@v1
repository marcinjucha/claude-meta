# Migrate to TCA + Clean Architecture

Migrate legacy iOS code to TCA and Clean Architecture patterns:

**ViewModel → TCA Store:**
- Convert ObservableObject to @Reducer with State/Action
- Extract @Published properties to State
- Convert methods to Actions (ViewAction/ResponseAction)
- Migrate Combine publishers to TCA Effects
- Add proper dependency injection (@Dependency)
- Implement BindingReducer for form fields

**Direct API Calls → Repository:**
- Extract URLSession calls to Repository
- Abstract data access behind protocol
- Add GRDB persistence if needed
- Return Publishers for reactive data

**Business Logic → Use Case:**
- Extract validation logic to Use Case
- Move orchestration between repositories to Use Case
- Create Services if combining 3+ repositories

**SwiftUI View Updates:**
- Replace @StateObject/@ObservedObject with @Bindable var store
- Convert manual bindings to $store.property
- Add .send(.view(...)) for actions
- Remove view-level business logic

**Testing Infrastructure:**
- Generate TestStore tests
- Create makeWithDeps factory
- Mock dependencies with testValue

**Preserves:**
- Existing functionality
- UI layout and design
- Business logic behavior

Provides step-by-step migration plan with before/after code examples.

**Agent Used:** May invoke `tca-developer` and `ios-architect`.

## Usage
```
/migration [file_path] [migration_type]
```

## Parameters
- `file_path`: Path to the legacy file to migrate (required)
- `migration_type`: Optional specific migration (e.g., "ViewModel to TCA", "extract Use Case", "add Repository")
