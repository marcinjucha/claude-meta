# Generate Tests for Next.js Features

Automatically generate comprehensive tests for Actions and Use Cases:

**Actions Tests:**
- Mock Use Cases (NOT repositories)
- Test form data validation with Zod
- Test dependency injection to Use Cases
- Test success redirects
- Test error handling and ClientResult returns
- 3-4 essential test cases (success, validation error, use case failure)

**Use Cases Tests:**
- Mock external dependencies (GraphQL via vi.mocked(client.mutate/query))
- Use REAL repository functions
- Test executePromise wrapper functionality
- Test ClientResult conversion
- Test business logic orchestration
- Test error handling (API failures, missing data)
- 3-4 essential test cases (success, API error, validation error, missing data)

**Test Utilities:**
- Generate `[feature]-test-utils.ts` with:
  - `createMock[Feature]DTO()` - DTO fixtures
  - `createMock[Feature]GraphQLResponse()` - Apollo response mocks
  - `createMockEmpty[Feature]GraphQLResponse()` - Empty responses
- Use `createApolloResponse` from shared test-utils

**Follows Project Patterns:**
- NO `beforeEach` (automatic cleanup in vitest.setup.ts)
- Use feature-specific test utils
- Mock Use Cases in Actions tests
- Mock GraphQL in Use Cases tests (use REAL repositories)
- Deterministic test data (no real Date/UUID)

Generates complete, working tests ready to run with `npm test`.

**Agent Used:** Invokes `test-generator-agent`.

## Usage
```
/test [file_path] [test_focus]
```

## Parameters
- `file_path`: Path to the file to generate tests for (required)
- `test_focus`: Optional specific test scenario (e.g., "actions", "use-case", "error-handling")
